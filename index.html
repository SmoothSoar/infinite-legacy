<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smooth Soar | Life Simulator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Manrope:wght@500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/ui-kit.css">
    <style>
        .landing-hero {
            background: linear-gradient(135deg, rgba(var(--color-primary), 0.14), rgba(var(--color-accent), 0.12));
            border-radius: 22px;
        }
        .hero-actions .btn {
            min-width: 180px;
        }
        .feature-card {
            padding: 18px;
        }
        .feature-card .icon-wrap {
            width: 42px;
            height: 42px;
            display: grid;
            place-items: center;
            border-radius: 12px;
            background: rgba(var(--color-primary), 0.12);
            color: rgb(var(--color-primary));
        }
        .step-card {
            border: 1px dashed rgba(var(--color-card-border), 0.8);
        }
    </style>
</head>
<body class="app-body">
    <nav class="navbar navbar-expand-lg app-navbar">
        <div class="container-fluid">
            <a class="navbar-brand brand" href="index.html">
                <span class="brand-mark"></span>
                <div class="brand-text">
                    <span class="title">Smooth Soar</span>
                    <small>Life Simulator</small>
                </div>
            </a>
            <div class="toolbar ms-auto order-lg-3">
                <button class="btn-ghost" id="themeToggle" type="button" aria-label="Toggle theme">
                    <i class="bi bi-sun"></i>
                    <span class="d-none d-xl-inline">Theme</span>
                </button>
                <a href="create-character.html" class="btn btn-primary d-none d-lg-inline-flex">
                    <i class="bi bi-person-plus-fill me-1"></i> Start a new life
                </a>
                <button class="navbar-toggler d-lg-none ms-1" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
            <div class="collapse navbar-collapse order-lg-2 mt-3 mt-lg-0" id="navbarNav">
                <ul class="navbar-nav me-auto gap-lg-1">
                    <li class="nav-item"><a class="nav-link active" href="index.html"><i class="bi bi-stars me-1"></i> Overview</a></li>
                    <li class="nav-item"><a class="nav-link" href="game.html"><i class="bi bi-grid me-1"></i> Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link" href="finances.html"><i class="bi bi-cash-stack me-1"></i> Finances</a></li>
                    <li class="nav-item"><a class="nav-link" href="career.html"><i class="bi bi-briefcase me-1"></i> Career</a></li>
                    <li class="nav-item"><a class="nav-link" href="education.html"><i class="bi bi-book me-1"></i> Education</a></li>
                </ul>
                <a href="create-character.html" class="btn btn-primary w-100 mt-3 d-lg-none">
                    <i class="bi bi-person-plus-fill me-1"></i> Start a new life
                </a>
            </div>
        </div>
    </nav>

    <main class="app-shell">
        <header class="page-heading landing-hero">
            <div>
                <p class="eyebrow">Life simulator</p>
                <h1 class="page-title">Design every quarter with clarity</h1>
                <p class="lede">A simple hub for careers, education, relationships, and wealth. Light or dark, everything stays legible and synced.</p>
                <div class="hero-actions d-flex flex-wrap gap-2 mt-2">
                    <button id="continueBtn" class="btn btn-primary">
                        <i class="bi bi-play-fill me-1"></i> Continue journey
                    </button>
                    <a href="create-character.html" class="btn btn-ghost">
                        <i class="bi bi-person-plus me-1"></i> Start new life
                    </a>
                </div>
                <div class="status-strip mt-3">
                    <span class="status-pill primary"><i class="bi bi-graph-up"></i> Dynamic careers</span>
                    <span class="status-pill"><i class="bi bi-cash-coin"></i> Live finances</span>
                    <span class="status-pill success"><i class="bi bi-heart"></i> Relationships &amp; events</span>
                </div>
            </div>
            <div class="page-panel">
                <div class="label">Your characters</div>
                <div class="panel-card">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <h6 class="mb-0">Recently played</h6>
                        <a href="create-character.html" class="badge-soft"><i class="bi bi-plus"></i>New</a>
                    </div>
                    <div id="characterList" class="d-flex flex-column gap-2">
                        <div class="text-muted">No characters yet. Start a new life to begin.</div>
                    </div>
                </div>
            </div>
        </header>

        <section class="content-grid">
            <div class="surface-card feature-card">
                <div class="d-flex align-items-start gap-3">
                    <div class="icon-wrap"><i class="bi bi-briefcase"></i></div>
                    <div>
                        <h5 class="mb-1">Climb or pivot</h5>
                        <p class="text-muted mb-2">Apply for roles, earn promotions, and manage performance without buried settings.</p>
                        <span class="badge-soft"><i class="bi bi-arrow-up"></i> Promotions unlock after 24 months</span>
                    </div>
                </div>
            </div>
            <div class="surface-card feature-card">
                <div class="d-flex align-items-start gap-3">
                    <div class="icon-wrap"><i class="bi bi-cash-coin"></i></div>
                    <div>
                        <h5 class="mb-1">Track every dollar</h5>
                        <p class="text-muted mb-2">Realistic taxes, living costs, and assets keep your net worth grounded.</p>
                        <span class="badge-soft"><i class="bi bi-lightning"></i> Balances refresh across every page</span>
                    </div>
                </div>
            </div>
            <div class="surface-card feature-card">
                <div class="d-flex align-items-start gap-3">
                    <div class="icon-wrap"><i class="bi bi-book"></i></div>
                    <div>
                        <h5 class="mb-1">Learn &amp; specialize</h5>
                        <p class="text-muted mb-2">Complete programs, stack skills, and unlock better opportunities.</p>
                        <span class="badge-soft"><i class="bi bi-shield-check"></i> Age-aware requirements stay fair</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="surface-card p-4">
            <div class="d-flex flex-wrap align-items-center gap-3 mb-3">
                <span class="status-pill primary"><i class="bi bi-stars"></i> How it works</span>
                <span class="text-muted">Quarterly turns | Persistent saves | Cross-page sync</span>
            </div>
            <div class="row g-3">
                <div class="col-md-4">
                    <div class="surface-card step-card h-100">
                        <h6 class="fw-bold mb-1">1. Create</h6>
                        <p class="text-muted mb-0">Pick your age, culture, and starting stats.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="surface-card step-card h-100">
                        <h6 class="fw-bold mb-1">2. Advance</h6>
                        <p class="text-muted mb-0">Progress time in 3-month jumps; watch finances update.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="surface-card step-card h-100">
                        <h6 class="fw-bold mb-1">3. Evolve</h6>
                        <p class="text-muted mb-0">Switch careers, study, build relationships, and grow net worth.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/theme.js"></script>
    <script>
        const characters = (() => {
            try {
                return JSON.parse(localStorage.getItem('lifeSimCharacters')) || [];
            } catch (_) {
                return [];
            }
        })();

        const lastCharacterId = localStorage.getItem('currentCharacterId') || localStorage.getItem('lastCharacterId');
        const characterListEl = document.getElementById('characterList');
        const continueBtn = document.getElementById('continueBtn');

        function renderCharacters() {
            if (!characters.length) return;
            characterListEl.innerHTML = characters.slice(0, 4).map((char) => {
                return `
                    <div class="surface-card p-3">
                        <div class="d-flex justify-content-between align-items-center mb-1">
                            <div class="fw-bold">${char.name}</div>
                            <span class="badge bg-info text-dark">Age ${char.age || 18}</span>
                        </div>
                        <div class="text-muted small">
                            ${char.country?.name || "Unknown"} | Last played: ${char.lastPlayed ? new Date(char.lastPlayed).toLocaleDateString() : '-'}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function getPreferredCharacter() {
            if (!characters.length) return null;
            if (lastCharacterId) {
                const match = characters.find(c => c.id === lastCharacterId);
                if (match) return match;
            }
            return characters[0];
        }

        function updateContinueState() {
            const preferred = getPreferredCharacter();
            if (!preferred) {
                continueBtn.disabled = true;
                continueBtn.textContent = 'Start a New Life';
                continueBtn.classList.add('btn-ghost');
                continueBtn.addEventListener('click', () => {
                    window.location.href = 'create-character.html';
                }, { once: true });
                return;
            }

            continueBtn.disabled = false;
            continueBtn.textContent = `Continue as ${preferred.name}`;
            continueBtn.addEventListener('click', () => {
                localStorage.setItem('currentCharacterId', preferred.id);
                localStorage.setItem('lastCharacterId', preferred.id);
                window.location.href = `game.html?characterId=${preferred.id}`;
            });
        }

        renderCharacters();
        updateContinueState();
    </script>
</body>
</html>
